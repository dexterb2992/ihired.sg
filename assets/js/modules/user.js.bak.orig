$(function(){

	$("#link_logout").on('click', function() {
		window.location.replace(base_url + "index");
	});

	$(".remove_user").on('click', function() {

		var ans = confirm('Remove?');
		if(ans) {

			var thisId = ($(this).attr('id')).split('_');

			$.ajax({
				url : base_url+'user/delete',
				data : { user_id : thisId[1] },
				type : 'post',
				success : function(data) {
					document.location.replace(base_url + 'user/listing');
				}
			});
		} else
			return false;
	});


	$("#btn_add_user").on('click', function() {
		var frm = $("#frm_add_user").serialize();
		$.ajax({
			url: base_url + 'user/create',
			data: frm,
			dataType: 'JSON',
			type: 'POST',
			success: function(data) {

				location.reload();
			}
		});
	});

	$(".btn_rem").on('click', function() {

		var ctr = ($(this).attr('id')).split('_');
		var ans = confirm("Are you sure to remove this user?");
		// var u_id = $("#user_id_" + ctr[1]).val();
		var u_id = $(this).attr("data-id");
		if(ans) {
			$.ajax({
				url : base_url + 'user/delete',
				data: { id: u_id },
				dataType: 'JSON',
				type: 'POST',
				success: function(data) {

					if(data.success == true) {
						$("#tr_" + ctr[1]).slideUp('slow');
					} else {
						return false;
					}
				}
			});
		}
	});

	$("#btn_dashInvite").on('click', function() {
		var full_name = $("#mod_full_name").text();
		var email_id 	= $("#mod_email_id").text();
		var u_id 		 	= $("#mod_user_id").val();
		$.ajax({
			url : base_url + 'dashboard/invite',
			data: { 
				email_id : email_id, 
				name : full_name,
				u_id : u_id 
			},
			dataType: 'JSON',
			type : 'POST',
			success : function(data) {
				if(data.success == true) {
					$("#modal_dashInvite").modal('hide');
					$("#input_dashemail").val(email_id);
					$("#modal_dashInvite_success").modal('show');
				}
			}
		});
	});
	// 6e0c731d817fd8d8d1b40737262e1f41c51d2b5e1a319c07bea385760e86c691942d40f8c9346986

	$(".btn_modDashInvite").on('click', function() {
		// var ctr 			= ($(this).attr('id')).split('_');
		var u_id 			= $(this).attr("data-id");
		var full_name = $(this).attr("data-full-name");
		var email_id 	= $(this).attr("data-email");

		$("#mod_user_id").val(u_id);
		$("#mod_full_name").text(ucwords(full_name));
		$("#mod_email_id").text(email_id);
	});

	$("#dashemail_sent").on('click', function() {
		location.reload();
	});
}); //end onload